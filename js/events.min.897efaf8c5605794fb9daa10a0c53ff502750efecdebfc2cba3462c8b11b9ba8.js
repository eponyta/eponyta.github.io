window.addEventListener("popstate",e=>{let t=document.getElementById("details");e.state&&e.state.type=="event_details"?(t&&_event_close_dialog(t),_open_event_pkmn_details(e.state.info,!1)):_event_close_dialog(t),console.log(e.state)});function open_event_pkmn_details(e,t){let n=e.target.closest("a");if(n)return;_open_event_pkmn_details(t.dataset.pkmnInfo,!0)}function _open_event_pkmn_details(e,t){const o=document.getElementsByTagName("main")[0],i=document.getElementById("pkmn-details"),s=i.content.cloneNode(!0),n=s.firstElementChild;if(o.appendChild(s),_event_populate_details_dialog(n,e),n.addEventListener("cancel",e=>{n.remove()}),n.showModal(),history&&t){let t={type:"event_details",info:e};history.pushState(t,"Details","#pkmn-details")}n.addEventListener("click",function(e){var t=n.getBoundingClientRect(),s=t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width;s||(history?history.back():_event_close_dialog(n))})}function close_event_pkmn_details(e){let t=e.target.closest("dialog");t&&(history?history.back():_event_close_dialog(t))}function _event_close_dialog(e){e.classList.add("dismissed"),e.animate?e.getAnimations().forEach(t=>{t.finished.then(()=>{e.remove()})}):(e.addEventListener("animationend",t=>{e.remove()}),e.addEventListener("animationcancel",t=>{e.remove()}))}function _event_populate_details_dialog(e,t){e.dataset.pkmnInfo=t;let i=Uint8Array.from(atob(t),e=>e.codePointAt(0)),a=new TextDecoder,n=JSON.parse(a.decode(i));for(var o=e.getElementsByTagName("*"),s=0;s<o.length;s++){let e=o[s];if(e.dataset.contentField&&(e.innerHTML=n[e.dataset.contentField]),e.dataset.srcField&&e.setAttribute("src",n[e.dataset.srcField]),e.dataset.hrefField&&e.setAttribute("href",n[e.dataset.hrefField]),e.dataset.classField&&(e.className=n[e.dataset.classField]),e.dataset.visibleField&&(e.dataset.hideBehavior=="1"?n[e.dataset.visibleField]?e.style.visibility="visible":e.style.visibility="hidden":n[e.dataset.visibleField]?e.style.display="":e.style.display="none"),e.dataset.datetimeField){const t=n[e.dataset.datetimeField];e.setAttribute("datetime",t)}}}function copy_event_r3_info(e){let t=e.target.closest("dialog"),n=Uint8Array.from(atob(t.dataset["pkmn-info"]),e=>e.codePointAt(0)),s=new TextDecoder,o=JSON.parse(s.decode(n)),i=o.species;navigator.clipboard.writeText(i).then(function(){console.log("Copied successfully")},function(e){console.log("Failed to copy: ",e)})}